{% extends "main.html" %}

{% block content %}
{%import "_macros.html" as macro%}
<div id="bodyTablaInventario" data-materia-prima="{{ datos_materia_prima | tojson }}">
    <div id="#containerProductos" style="width: -moz-available;">
        <div class="table-container">
            <table id="tblMateria" class="table table-hover table-sm">
                <thead>
                    <tr>
                        <th id="tblCabecera">Nombre del producto</th>
                        <th id="tblCabecera">Existencia</th>
                        <th id="tblCabecera">Tipo</th>
                        <th id="tblCabecera">Precio Compra</th>
                        <th id="tblCabecera">Fecha Compra</th>
                        <th id="tblCabecera">Fecha Vencimiento</th>
                        <th id="tblCabecera">Porcentaje</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>        
        </div>

        <!-- modal material prima-->
        <div class="modal fade" id="modalMaterialPrima" tabindex="-1" aria-labelledby="modalMaterialPrimaLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content" id="modalMaterialPrima">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="modalMaterialPrimaLabel"><i class="fa-solid fa-cookie-bite fa-lg" style="color: #826455;"></i> Agregar Material Prima</h1>
                    </div>
                    <form class="needs-validation" id="formDataProductosNuevos" name="formDataProductosNuevos" method="POST">
                        <div class="modal-body" id="productoDetails"></div>
                        <div class="container">
                            <div class="row align-items-center">
                                <input type="text" id="txtIdMateria" style="display: none;" class="form-control">

                                <div id="materialPrima" class="d-flex col-lg-8">
                                    {{macro.render_field(form.nombre,class="form-control")}}
                                </div>

                                <div id="materialPrima" class="d-flex col-lg-8">
                                    {{macro.render_field(form.precio,class="form-control")}}
                                </div>

                                <div id="materialPrima" class="d-flex col-lg-8">
                                    {{macro.render_field(form.cantidad,class="form-control")}}
                                </div>


                                <div id="materialPrima" class="d-flex col-lg-8">
                                    <select id="tipo_compra" name="tipo_compra" class="form-select">
                                        <option value="bulto" {% if form.tipo_compra.data == 'bulto' %} selected {% endif %}>Bulto</option>
                                        <option value="caja" {% if form.tipo_compra.data == 'caja' %} selected {% endif %}>Caja</option>
                                        <option value="paquete" {% if form.tipo_compra.data == 'paquete' %} selected {% endif %}>Paquete</option>
                                        <option value="unidad" {% if form.tipo_compra.data == 'unidad' %} selected {% endif %}>Unidad</option>
                                    </select>
                                    
                                </div>

                                <div id="materialPrima" class="d-flex col-lg-8 ">
                                    {{macro.render_field(form.fechaVen,class="form-control")}}
                                </div>

                                <div id="materialPrima" class="d-flex col-lg-8">
                                    {{macro.render_field(form.fechaCom,class="form-control")}}
                                </div>

                                <div id="materialPrima" class="d-flex col-lg-8">
                                    <select id="forma_compra" name="forma_compra" class="form-select">
                                        <option value="Provedor" {% if form.forma_compra.data == 'Provedor' %} selected {% endif %}>Proveedor</option>
                                        <option value="Manual" {% if form.forma_compra.data == 'Manual' %} selected {% endif %}>Manual</option>
                                    </select>
                                    
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button id="btnSaveMaterial" type="button" class="btn btn-success" onclick="moduloInventario.guardarMateriaPrima()">Guardar Material Prima</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- modal editar -->
        <div class="modal fade" id="modalMateriaEditar" tabindex="-1" aria-labelledby="modalMateriaEditarsLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content" id="modalMateriaEditar">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5"><i class="fa-solid fa-cookie-bite fa-lg" style="color: #826455;"></i> Editar materia Prima</h1>
                    </div>
                    <form class="needs-validation" id="formDataProductosEditar" name="formDataProductosEditar" method="POST">
                        <div class="modal-body" id="productoDetails"></div>
                        <div class="container">
                            <div class="row align-items-start">
                                <input type="text" id="txtIdMateriaEditar" style="display: none;" class="form-control">
                                <div id="materialPrima" class="d-flex col">
                                    <label id="lblNombre" style="margin-right: 103px;" for="txtNobreMaterial" class="form-label">Nombre:</label>
                                    <input type="text" id="txtNobreMaterialEditar" class="form-control" placeholder="Nombre del Producto">
                                </div>

                                <div id="materialPrima" class="d-flex col">
                                    <label id="lblFeCompra" style="margin-right: 32px;" for="txtFechaCompraMaterial" class="form-label">Fecha de Compra:</label>
                                    <input type="date" id="txtFechaCompraMaterialEditar" class="form-control">
                                </div>

                                <div id="materialPrima" class="d-flex col">
                                    <label id="lblFeVenta"  for="txtFechaVenciMaterial" class="form-label">Fecha de Vencimiento:</label>
                                    <input type="date" id="txtFechaVenciMaterialEditar" class="form-control">
                                </div>


                                <div id="materialPrima" class="d-flex col">
                                    <label id="lblCantidad" style="margin-right: 93px;" for="txtCantidadMaterial" class="form-label">Cantidad:</label>
                                    <input type="number" id="txtCantidadMaterialEditar" class="form-control" placeholder="Cantidad">
                                </div>

                                <div id="materialPrima" class="d-flex col ">
                                    <label id="lblPreCompra" style="margin-right: 30px;" for="txtPrecioCompra" class="form-label">Precio de Compra:</label>
                                    <input type="text" id="txtPrecioCompraEditar" class="form-control" placeholder="Precio Compra">
                                </div>

                                <div id="materialPrima" class="d-flex col">
                                    <label id="lblPorcentaje" style="margin-right: 84px;"  for="txtPorcentajeMaterial" class="form-label">Porcentaje:</label>
                                    <input type="number" id="txtPorcentajeMaterialEditar" class="form-control" placeholder="Porcentaje">
                                    <span class="input-group-text">%</span>
                                </div>

                                <div id="materialPrima" class="d-flex col">
                                    <label id="lblMedida" style="margin-right: 107px;" for="txtMedidaMaterial" class="form-label">Medida:</label>
                                    <select id="txtMedidaMaterialEditar" class="form-select" aria-label="Default select example">
                                        <option value="1">PZ</option>
                                        <option value="2">G</option>
                                        <option value="3">KG</option>
                                        <option value="4">LB</option>
                                        <option value="5">OZ</option>
                                        <option value="6">ML</option>
                                        <option value="7">L</option>
                                        <option value="8">GAL</option>
                                        <option value="9">CUP</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                            <button id="btnEditarGalleta" type="button" class="btn btn-success" onclick="moduloInventario.guardarMateriaPrima()">Actualizar Materia Prima</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>


        <div class="button-container btnEnd">
            <button class="btn btn-success" id="agregarMaterialPrima" data-bs-toggle="modal" data-bs-target="#modalMaterialPrima">Agregar Material Prima</button>

        </div>
    </div>
</div>
{% endblock %}